<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="495px" preserveAspectRatio="none" style="width:559px;height:495px;" version="1.1" viewBox="0 0 559 495" width="559px" zoomAndPan="magnify"><defs><filter height="300%" id="f1cuzpx0iz6ulw" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><ellipse cx="102" cy="20" fill="#000000" filter="url(#f1cuzpx0iz6ulw)" rx="10" ry="10" style="stroke: none; stroke-width: 1.0;"/><path d="M197.5,54.3171 L197.5,64.1943 L177.5,68.1943 L197.5,72.1943 L197.5,82.0715 A0,0 0 0 0 197.5,82.0715 L547.5,82.0715 A0,0 0 0 0 547.5,82.0715 L547.5,64.3171 L537.5,54.3171 L197.5,54.3171 A0,0 0 0 0 197.5,54.3171 " fill="#FBFB77" filter="url(#f1cuzpx0iz6ulw)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M537.5,54.3171 L537.5,64.3171 L547.5,64.3171 L537.5,54.3171 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="329" x="203.5" y="74.2151">浏览器会将一些列DOM操作集中处理，然后统一更新渲染</text><rect fill="#FEFECE" filter="url(#f1cuzpx0iz6ulw)" height="36.3887" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="151" x="26.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="131" x="36.5" y="73.752">对DOM进行了改动(同步)</text><rect fill="#FEFECE" filter="url(#f1cuzpx0iz6ulw)" height="69.166" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="141" x="31.5" y="106.3887"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="114" x="41.5" y="130.1406">componentDieMount</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="121" x="41.5" y="146.5293">componentDidUpdate</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="116" x="41.5" y="162.918">useLayoutEffectHook</text><rect fill="#FFFFFF" filter="url(#f1cuzpx0iz6ulw)" height="200.2861" style="stroke: #000000; stroke-width: 2.0;" width="184" x="10" y="186.1309"/><path d="M114,187.1309 L114,198.251 L104,208.251 L10,208.251 " fill="none" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="94" x="13" y="203.1748">等待渲染(异步)</text><rect fill="#FEFECE" filter="url(#f1cuzpx0iz6ulw)" height="36.3887" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="164" x="20" y="225.251"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="144" x="30" y="249.0029">浏览器下一次渲染时间到达</text><rect fill="#FEFECE" filter="url(#f1cuzpx0iz6ulw)" height="36.3887" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="128" x="38" y="281.6396"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="108" x="48" y="305.3916">对比差异，进行渲染</text><rect fill="#FEFECE" filter="url(#f1cuzpx0iz6ulw)" height="36.3887" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="92" x="56" y="338.0283"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="72" x="66" y="361.7803">用户看到效果</text><rect fill="#FEFECE" filter="url(#f1cuzpx0iz6ulw)" height="36.3887" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="71" x="66.5" y="406.417"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="51" x="76.5" y="430.1689">useEffect</text><ellipse cx="102" cy="473.8057" fill="#FFFFFF" filter="url(#f1cuzpx0iz6ulw)" rx="11" ry="11" style="stroke: #000000; stroke-width: 1.0;"/><ellipse cx="102" cy="473.8057" fill="#000000" rx="6" ry="6" style="stroke: #7F7F7F; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="102" x2="102" y1="30" y2="50"/><polygon fill="#A80036" points="98,40,102,50,106,40,102,44" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="102" x2="102" y1="86.3887" y2="106.3887"/><polygon fill="#A80036" points="98,96.3887,102,106.3887,106,96.3887,102,100.3887" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="102" x2="102" y1="261.6396" y2="281.6396"/><polygon fill="#A80036" points="98,271.6396,102,281.6396,106,271.6396,102,275.6396" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="102" x2="102" y1="318.0283" y2="338.0283"/><polygon fill="#A80036" points="98,328.0283,102,338.0283,106,328.0283,102,332.0283" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="102" x2="102" y1="175.5547" y2="225.251"/><polygon fill="#A80036" points="98,215.251,102,225.251,106,215.251,102,219.251" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="102" x2="102" y1="374.417" y2="406.417"/><polygon fill="#A80036" points="98,396.417,102,406.417,106,396.417,102,400.417" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="102" x2="102" y1="442.8057" y2="462.8057"/><polygon fill="#A80036" points="98,452.8057,102,462.8057,106,452.8057,102,456.8057" style="stroke: #A80036; stroke-width: 1.0;"/><!--
@startuml

start

:对DOM进行了改动(同步);
note right
浏览器会将一些列DOM操作集中处理，然后统一更新渲染
end note
:componentDieMount
componentDidUpdate
useLayoutEffectHook;
partition 等待渲染(异步) {
    :浏览器下一次渲染时间到达;
    :对比差异，进行渲染;
    :用户看到效果;
}
:useEffect;

stop

@enduml

PlantUML version 1.2019.09(Tue Aug 27 00:19:51 CST 2019)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_201-b09
Operating System: Windows 10
OS Version: 10.0
Default Encoding: GBK
Language: zh
Country: CN
--></g></svg>