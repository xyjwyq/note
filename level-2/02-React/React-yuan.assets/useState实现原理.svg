<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="341px" preserveAspectRatio="none" style="width:674px;height:341px;" version="1.1" viewBox="0 0 674 341" width="674px" zoomAndPan="magnify"><defs><filter height="300%" id="frn3t91j5d78p" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><path d="M264,10 L264,28.7544 L244,32.7544 L264,36.7544 L264,55.5088 A0,0 0 0 0 264,55.5088 L662,55.5088 A0,0 0 0 0 662,55.5088 L662,20 L652,10 L264,10 A0,0 0 0 0 264,10 " fill="#FBFB77" filter="url(#frn3t91j5d78p)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M652,10 L652,20 L662,20 L652,10 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="13" x="270" y="29.8979">在</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="64" x="283" y="29.8979">React节点</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="273" x="347" y="29.8979">中持有对函数组件的引用以及状态数组的引用，</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="377" x="270" y="47.6523">因此，每次重新调用函数组件时，能正确的找到该函数的状态数组</text><ellipse cx="234" cy="32.7544" fill="#000000" filter="url(#frn3t91j5d78p)" rx="10" ry="10" style="stroke: none; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#frn3t91j5d78p)" height="36.3887" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="126" x="171" y="75.5088"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="106" x="181" y="99.2607">第N次调用useState</text><polygon fill="#FEFECE" filter="url(#frn3t91j5d78p)" points="142.5,131.8975,325.5,131.8975,337.5,143.8975,325.5,155.8975,142.5,155.8975,130.5,143.8975,142.5,131.8975" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="183" x="142.5" y="148.9919">检查该节点的状态数组是否存在下标N</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="33" x="97.5" y="141.4805">不存在</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="33" x="337.5" y="141.4805">不存在</text><rect fill="#FEFECE" filter="url(#frn3t91j5d78p)" height="36.3887" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="152" x="44.5" y="165.8975"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="132" x="54.5" y="189.6494">使用默认值创建一个状态</text><rect fill="#FEFECE" filter="url(#frn3t91j5d78p)" height="36.3887" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="221" x="10" y="222.2861"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="201" x="20" y="246.0381">将该状态加入到状态数组中，下标为N</text><rect fill="#FEFECE" filter="url(#frn3t91j5d78p)" height="36.3887" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="92" x="301.5" y="165.8975"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="72" x="311.5" y="189.6494">忽略掉默认值</text><rect fill="#FEFECE" filter="url(#frn3t91j5d78p)" height="36.3887" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="104" x="295.5" y="222.2861"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="84" x="305.5" y="246.0381">直接得到状态值</text><polygon fill="#FEFECE" filter="url(#frn3t91j5d78p)" points="234,264.6748,246,276.6748,234,288.6748,222,276.6748,234,264.6748" style="stroke: #A80036; stroke-width: 1.5;"/><ellipse cx="234" cy="319.6748" fill="#FFFFFF" filter="url(#frn3t91j5d78p)" rx="11" ry="11" style="stroke: #000000; stroke-width: 1.0;"/><ellipse cx="234" cy="319.6748" fill="#000000" rx="6" ry="6" style="stroke: #7F7F7F; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="234" x2="234" y1="42.7544" y2="75.5088"/><polygon fill="#A80036" points="230,65.5088,234,75.5088,238,65.5088,234,69.5088" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="120.5" x2="120.5" y1="202.2861" y2="222.2861"/><polygon fill="#A80036" points="116.5,212.2861,120.5,222.2861,124.5,212.2861,120.5,216.2861" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="347.5" x2="347.5" y1="202.2861" y2="222.2861"/><polygon fill="#A80036" points="343.5,212.2861,347.5,222.2861,351.5,212.2861,347.5,216.2861" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="130.5" x2="120.5" y1="143.8975" y2="143.8975"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="120.5" x2="120.5" y1="143.8975" y2="165.8975"/><polygon fill="#A80036" points="116.5,155.8975,120.5,165.8975,124.5,155.8975,120.5,159.8975" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="337.5" x2="347.5" y1="143.8975" y2="143.8975"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="347.5" x2="347.5" y1="143.8975" y2="165.8975"/><polygon fill="#A80036" points="343.5,155.8975,347.5,165.8975,351.5,155.8975,347.5,159.8975" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="120.5" x2="120.5" y1="258.6748" y2="276.6748"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="120.5" x2="222" y1="276.6748" y2="276.6748"/><polygon fill="#A80036" points="212,272.6748,222,276.6748,212,280.6748,216,276.6748" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="347.5" x2="347.5" y1="258.6748" y2="276.6748"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="347.5" x2="246" y1="276.6748" y2="276.6748"/><polygon fill="#A80036" points="256,272.6748,246,276.6748,256,280.6748,252,276.6748" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="234" x2="234" y1="111.8975" y2="131.8975"/><polygon fill="#A80036" points="230,121.8975,234,131.8975,238,121.8975,234,125.8975" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="234" x2="234" y1="288.6748" y2="308.6748"/><polygon fill="#A80036" points="230,298.6748,234,308.6748,238,298.6748,234,302.6748" style="stroke: #A80036; stroke-width: 1.0;"/><!--
@startuml

start
note right
在**React节点**中持有对函数组件的引用以及状态数组的引用，
因此，每次重新调用函数组件时，能正确的找到该函数的状态数组
end note

:第N次调用useState;
if(检查该节点的状态数组是否存在下标N) then(不存在)
    :使用默认值创建一个状态;
    :将该状态加入到状态数组中，下标为N;
else(不存在)
    :忽略掉默认值;
    :直接得到状态值;
endif


stop



@enduml

PlantUML version 1.2019.09(Tue Aug 27 00:19:51 CST 2019)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_201-b09
Operating System: Windows 10
OS Version: 10.0
Default Encoding: GBK
Language: zh
Country: CN
--></g></svg>