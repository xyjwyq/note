<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="820px" preserveAspectRatio="none" style="width:637px;height:820px;" version="1.1" viewBox="0 0 637 820" width="637px" zoomAndPan="magnify"><defs><filter height="300%" id="flblrhkgqv0eb" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><ellipse cx="261.5" cy="20" fill="#000000" filter="url(#flblrhkgqv0eb)" rx="10" ry="10" style="stroke: none; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#flblrhkgqv0eb)" height="36.3887" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="116" x="203.5" y="50"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="96" x="213.5" y="73.752">判断节点更新方式</text><polygon fill="#FEFECE" filter="url(#flblrhkgqv0eb)" points="228.5,106.3887,294.5,106.3887,306.5,118.3887,294.5,130.3887,228.5,130.3887,216.5,118.3887,228.5,106.3887" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="66" x="228.5" y="123.4832">节点更新方式</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="71" x="145.5" y="115.9717">React.render()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="40" x="306.5" y="115.9717">setState</text><rect fill="#FEFECE" filter="url(#flblrhkgqv0eb)" height="36.3887" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="180" x="10" y="140.3887"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="160" x="20" y="164.1406">进行根节点的对比（diff）更新</text><rect fill="#FEFECE" filter="url(#flblrhkgqv0eb)" height="36.3887" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="309" x="268.5" y="140.3887"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="289" x="278.5" y="164.1406">运行生命周期函数，static getDerivedStateFromProps</text><rect fill="#FEFECE" filter="url(#flblrhkgqv0eb)" height="36.3887" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="187" x="329.5" y="196.7773"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="167" x="339.5" y="220.5293">运行shouldComponentUpdate</text><rect fill="#FEFECE" filter="url(#flblrhkgqv0eb)" height="36.3887" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="348" x="249" y="302.6775"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="276" x="259" y="326.4294">运行render，得到一个新的节点，进入该新的节点的</text><text fill="#000000" font-family="sans-serif" font-size="12" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="52" x="535" y="326.4294">对比更新</text><rect fill="#FEFECE" filter="url(#flblrhkgqv0eb)" height="36.3887" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="406" x="220" y="359.0662"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="386" x="230" y="382.8181">将生命周期函数getSnapshotBeforeUpdate加入执行队列，以待将来执行</text><rect fill="#FEFECE" filter="url(#flblrhkgqv0eb)" height="36.3887" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="381" x="232.5" y="415.4548"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="361" x="242.5" y="439.2068">将生命周期函数componentDidUpdate加入执行队列，以待将来执行</text><polygon fill="#FEFECE" filter="url(#flblrhkgqv0eb)" points="346.5,253.166,499.5,253.166,511.5,265.166,499.5,277.166,346.5,277.166,334.5,265.166,346.5,253.166" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="19" x="427" y="289.772">true</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="153" x="346.5" y="270.2605">shouldComponentUpdate返回值</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="24" x="511.5" y="262.749">false</text><ellipse cx="557.5" cy="265.166" fill="#FFFFFF" filter="url(#flblrhkgqv0eb)" rx="11" ry="11" style="stroke: #000000; stroke-width: 1.0;"/><ellipse cx="557.5" cy="265.166" fill="#000000" rx="6" ry="6" style="stroke: #7F7F7F; stroke-width: 1.0;"/><polygon fill="#FEFECE" filter="url(#flblrhkgqv0eb)" points="261.5,461.8435,273.5,473.8435,261.5,485.8435,249.5,473.8435,261.5,461.8435" style="stroke: #A80036; stroke-width: 1.5;"/><rect fill="#FEFECE" filter="url(#flblrhkgqv0eb)" height="36.3887" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="107" x="208" y="505.8435"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="87" x="218" y="529.5955">更新虚拟DOM树</text><rect fill="#FEFECE" filter="url(#flblrhkgqv0eb)" height="36.3887" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="131" x="196" y="562.2322"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="111" x="206" y="585.9841">完成真实的DOM更新</text><rect fill="#FEFECE" filter="url(#flblrhkgqv0eb)" height="36.3887" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="254" x="134.5" y="618.6208"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="234" x="144.5" y="642.3728">依次调用执行队列中的componentDidMount</text><rect fill="#FEFECE" filter="url(#flblrhkgqv0eb)" height="36.3887" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="286" x="118.5" y="675.0095"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="266" x="128.5" y="698.7615">依次调用执行队列中的getSnapshotBeforeUpdate</text><rect fill="#FEFECE" filter="url(#flblrhkgqv0eb)" height="36.3887" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="261" x="131" y="731.3982"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="241" x="141" y="755.1501">依次调用执行队列中的componentDidUpdate</text><ellipse cx="261.5" cy="798.7869" fill="#FFFFFF" filter="url(#flblrhkgqv0eb)" rx="11" ry="11" style="stroke: #000000; stroke-width: 1.0;"/><ellipse cx="261.5" cy="798.7869" fill="#000000" rx="6" ry="6" style="stroke: #7F7F7F; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="261.5" x2="261.5" y1="30" y2="50"/><polygon fill="#A80036" points="257.5,40,261.5,50,265.5,40,261.5,44" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="423" x2="423" y1="176.7773" y2="196.7773"/><polygon fill="#A80036" points="419,186.7773,423,196.7773,427,186.7773,423,190.7773" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="423" x2="423" y1="339.0662" y2="359.0662"/><polygon fill="#A80036" points="419,349.0662,423,359.0662,427,349.0662,423,353.0662" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="423" x2="423" y1="395.4548" y2="415.4548"/><polygon fill="#A80036" points="419,405.4548,423,415.4548,427,405.4548,423,409.4548" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="423" x2="423" y1="277.166" y2="302.6775"/><polygon fill="#A80036" points="419,292.6775,423,302.6775,427,292.6775,423,296.6775" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="511.5" x2="546.5" y1="265.166" y2="265.166"/><polygon fill="#A80036" points="536.5,261.166,546.5,265.166,536.5,269.166,540.5,265.166" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="423" x2="423" y1="451.8435" y2="473.8435"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="423" x2="273.5" y1="473.8435" y2="473.8435"/><polygon fill="#A80036" points="283.5,469.8435,273.5,473.8435,283.5,477.8435,279.5,473.8435" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="423" x2="423" y1="233.166" y2="253.166"/><polygon fill="#A80036" points="419,243.166,423,253.166,427,243.166,423,247.166" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="216.5" x2="100" y1="118.3887" y2="118.3887"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="100" x2="100" y1="118.3887" y2="140.3887"/><polygon fill="#A80036" points="96,130.3887,100,140.3887,104,130.3887,100,134.3887" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="306.5" x2="423" y1="118.3887" y2="118.3887"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="423" x2="423" y1="118.3887" y2="140.3887"/><polygon fill="#A80036" points="419,130.3887,423,140.3887,427,130.3887,423,134.3887" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="100" x2="100" y1="176.7773" y2="473.8435"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="100" x2="249.5" y1="473.8435" y2="473.8435"/><polygon fill="#A80036" points="239.5,469.8435,249.5,473.8435,239.5,477.8435,243.5,473.8435" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="261.5" x2="261.5" y1="86.3887" y2="106.3887"/><polygon fill="#A80036" points="257.5,96.3887,261.5,106.3887,265.5,96.3887,261.5,100.3887" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="261.5" x2="261.5" y1="485.8435" y2="505.8435"/><polygon fill="#A80036" points="257.5,495.8435,261.5,505.8435,265.5,495.8435,261.5,499.8435" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="261.5" x2="261.5" y1="542.2322" y2="562.2322"/><polygon fill="#A80036" points="257.5,552.2322,261.5,562.2322,265.5,552.2322,261.5,556.2322" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="261.5" x2="261.5" y1="598.6208" y2="618.6208"/><polygon fill="#A80036" points="257.5,608.6208,261.5,618.6208,265.5,608.6208,261.5,612.6208" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="261.5" x2="261.5" y1="655.0095" y2="675.0095"/><polygon fill="#A80036" points="257.5,665.0095,261.5,675.0095,265.5,665.0095,261.5,669.0095" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="261.5" x2="261.5" y1="711.3982" y2="731.3982"/><polygon fill="#A80036" points="257.5,721.3982,261.5,731.3982,265.5,721.3982,261.5,725.3982" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="261.5" x2="261.5" y1="767.7869" y2="787.7869"/><polygon fill="#A80036" points="257.5,777.7869,261.5,787.7869,265.5,777.7869,261.5,781.7869" style="stroke: #A80036; stroke-width: 1.0;"/><!--
@startuml

start

:判断节点更新方式;
if(节点更新方式) then(React.render())
    :进行根节点的对比（diff）更新;
else(setState)
    :运行生命周期函数，static getDerivedStateFromProps;
    :运行shouldComponentUpdate;
    if(shouldComponentUpdate返回值) then(false)
        stop
    else(true)
        :运行render，得到一个新的节点，进入该新的节点的**对比更新**;
        :将生命周期函数getSnapshotBeforeUpdate加入执行队列，以待将来执行;
        :将生命周期函数componentDidUpdate加入执行队列，以待将来执行; 
    endif
endif
:更新虚拟DOM树;
:完成真实的DOM更新;
:依次调用执行队列中的componentDidMount;
:依次调用执行队列中的getSnapshotBeforeUpdate;
:依次调用执行队列中的componentDidUpdate;


stop

@enduml

PlantUML version 1.2019.09(Tue Aug 27 00:19:51 CST 2019)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 1.8.0_201-b09
Operating System: Windows 10
OS Version: 10.0
Default Encoding: GBK
Language: zh
Country: CN
--></g></svg>